(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t);var r,a=n(28),c=n(0),o=n.n(c),i=n(25),u=n(19),s=n(5),l=n(7),p=n(14),f=n(13),h=n(15),d=n(22),O=n(44),b=n(16),m={palette:{primary:{light:"#76d275",main:"#43a047",dark:"#00701a",text:"#111111",contrastText:"#ffffff"},secondary:{light:"#fa5788",main:"#c2185b",dark:"#8c0032",text:"#ffffff",contrastText:"#111111"},error:{light:"#ff5131",main:"#d50000",dark:"#9b0000",text:"#ffffff",contrastText:"#111111"},accent:{light:"#63a4ff",main:"#1976d2",dark:"#004ba0",text:"#ffffff",contrastText:"#111111"},test:"aqua"},typo:{fontFamily:["SofiaPro","sans-serif"].join(","),fontSize:"14px"},header:{background:{light:"#171717",main:"#0a0a0a",dark:"#000",text:"#ffffff",contrastText:"#FFF"},height:60}},v=("0 ".concat("8px"),n(17));!function(e){e.HOME="/",e.SIGN_IN="/sign_in",e.AUTH="/auth",e.NOT_FOUND="/404",e.REDIRECT="/*"}(r||(r={}));var E,y,g=c.createContext("TEST"),j=n(79),T=n.n(j),S=n(52),k=n(37),N=n(143),x=n(144),C=n(86),I=n(138),_=n(57),w=n(58),A=n(139),F=n(140),R=n(141);!function(e){e.SUCCESS="success",e.WARNING="warning",e.CONFIRM="confirm",e.INFO="info"}(y||(y={}));var P,L=function e(t,n,r){return t.palette[n]?r(t,n):e(t,"primary",r)},H=Object(C.a)({palette:(E={primary:I.a,secondary:_.a,error:w.a},Object(a.a)(E,y.SUCCESS,{main:A.a[500],light:A.a[400],dark:A.a[700],contrastText:"#FFF"}),Object(a.a)(E,y.WARNING,{main:F.a[500],light:F.a[200],dark:F.a[800],contrastText:"#FFF"}),Object(a.a)(E,y.CONFIRM,{main:R.a[500],light:R.a[200],dark:R.a[800],contrastText:"#FFF"}),Object(a.a)(E,y.INFO,{main:R.a[500],light:R.a[200],dark:R.a[800],contrastText:"#FFF"}),E),typography:{fontSize:15}}),U=function(e,t){return{color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"&:hover":{backgroundColor:e.palette[t].dark,"@media (hover: none)":{backgroundColor:e.palette[t].main}}}},G=Object(k.a)(function(e){return Object(x.a)({root:{textTransform:"none"},success:L(e,y.SUCCESS,U),warning:L(e,y.WARNING,U),info:L(e,"info",U),primary:L(e,"primary",U),error:L(e,"error",U),secondary:L(e,"secondary",U),confirm:L(e,"confirm",U),content:{},disabled:{boxShadow:"none !important"}})})(function(e){var t=e.classes,n=e.color,r=e.children,a=(e.href,e.onClick),o=Object(S.a)(e,["classes","color","children","href","onClick"]);return c.createElement(N.a,Object.assign({variant:"contained"},o,{classes:{disabled:t.disabled,root:t[n],sizeLarge:t.sizeLarge,sizeSmall:t.sizeSmall},onClick:a}),c.createElement("span",{className:t.content},r))});!function(e){e.INCREASE="@@COUNTER/INCREASE",e.DECREASE="@@COUNTER/DECREASE",e.SET_COUNTER="@@COUNTER/SET_COUNTER"}(P||(P={}));var D,z=function(e){return{type:P.SET_COUNTER,payload:e}},W={value:0},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.SET_COUNTER:return Object(b.a)({},e,{value:t.payload});default:return e}},M=[function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){var a,c,o=t();r.type===P.INCREASE&&(c||(c=setTimeout(function(){a=5===o.counter.value?0:o.counter.value+1,n(z(a)),c=void 0},1e3))),r.type===P.DECREASE&&(a=-5===o.counter.value?0:o.counter.value-1,n(z(a))),e(r)}}}];!function(e){e.SET_TOKEN="@@AUTH/SET_TOKEN",e.FETCH_TOKEN="@@AUTH/FETCH_TOKEN",e.CLEAR_TOKEN="@@AUTH/CLEAR_TOKEN",e.SIGN_OUT="@@AUTH/SIGN_OUT"}(D||(D={}));var V,B=function(e){return{type:D.SET_TOKEN,payload:e}},J={token:void 0},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.SET_TOKEN:return Object(b.a)({},e,{token:t.payload});case D.CLEAR_TOKEN:return Object(b.a)({},J);default:return e}},Q=n(8),X=n.n(Q),Y=n(23),Z=n(9),$=n(45),ee=n.n($),te=function(){var e=Object(Y.a)(X.a.mark(function e(t){var n,r;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="https://unsplash.com/oauth/token?client_id=".concat("588745fe0494eda1c54354b97d7885c5f94a97a359ce835605acf2df6163ba8c","&client_secret=").concat("a61e2010de217db18110423b0e2defbe52175362520ec217a061226fea832ea0","&redirect_uri=").concat("http://localhost:3000/auth","&code=").concat(t,"&grant_type=","authorization_code"),e.next=4,ee.a.post(n);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),ne=[function(e){var t=e.dispatch;return function(e){return function(n){if(n.type===D.FETCH_TOKEN){var a=n.payload;te(a).then(function(e){t(B(e)),t(Object(Z.d)(r.HOME))})}e(n)}}},function(e){var t=e.dispatch;return function(e){return function(n){n.type===D.SIGN_OUT&&(t(B(void 0)),t(Object(Z.d)(r.SIGN_IN))),e(n)}}}],re=n(35),ae=Object(re.b)("authStore")(V=Object(re.c)(V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).renderAuthControls=function(){return n.props.isSignedIn?c.createElement(c.Fragment,null,c.createElement(G,{onClick:n.props.onSignOut},"Sign Out")):null},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.createElement("header",{className:e.root},c.createElement("div",{className:e.content},c.createElement("div",null,this.renderAuthControls())))}}]),t}(c.PureComponent))||V)||V,ce=Object(d.b)(function(e){return{root:{background:e.header.background.main,color:e.header.background.contrastText,height:e.header.height},content:{width:"100%",margin:"0 auto",maxWidth:768,display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"}}})(ae),oe=Object(u.c)(function(e){return{isSignedIn:!!e.auth.token}},function(e){return{onIncrease:function(){return e({type:P.INCREASE})},onDecrease:function(){return e({type:P.DECREASE})},onSignOut:function(){return e({type:D.SIGN_OUT})}}})(ce),ie=function(e){var t=e.children,n=e.title;return c.createElement(c.Fragment,null,c.createElement(T.a,null,c.createElement("title",null,n)),c.createElement(oe,null),t)},ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={spans:0},n.imageRef=o.a.createRef(),n.setSpans=function(){var e=n.imageRef.current.clientHeight,t=Math.ceil(e/10);n.setState(function(e){return Object(b.a)({},e,{spans:t})})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"componentWillUnmount",value:function(){this.imageRef.current.removeEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.classes,r=this.state.spans;return o.a.createElement("div",{className:n.item,style:{gridRowEnd:"span ".concat(r)}},o.a.createElement("img",{className:n.img,src:t,alt:"",ref:this.imageRef}))}}]),t}(o.a.PureComponent),se=Object(d.b)(function(e){return{item:{width:"100%"},img:{width:"100%",display:"block"}}})(ue),le=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.images,n=e.classes;return o.a.createElement("div",{className:n.grid},o.a.createElement("div",{className:n.content},t.map(function(e){var t=e.description,n=e.urls,r=e.likes,a=e.id;return o.a.createElement(se,{key:Object(O.v4)(),className:"grid__item",id:a,description:t,url:n.small,likes:r})})))}}]),t}(o.a.PureComponent),pe=Object(d.b)(function(){return{grid:{display:"flex",flexDirection:"column",alignItems:"center"},content:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gridGap:"0 15px",gridAutoRows:"11px"}}})(le),fe=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchList(),this.props.onFetchUserProfile()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.photos;return console.log(this.context),c.createElement(ie,{title:"CLONE UNSPLASH|HOME"},c.createElement("div",{className:t.container},c.createElement("h2",null,"hello ",this.props.userName),c.createElement(pe,{images:n})))}}]),t}(c.PureComponent);fe.contextType=g;var he,de,Oe=Object(d.b)(function(e){return{root:{background:e.palette.primary.main},container:{maxWidth:960,margin:"40px auto"},signInLinkWrapper:{width:"100%",display:"flex",justifyContent:"center"},signInLink:{color:e.palette.primary.text,border:""}}})(fe);!function(e){e.FETCH_LIST="@@PHOTOS/FETCH_LIST",e.SET_LIST="@@PHOTOS/SET_LIST",e.SET_PAGINATION="@@PHOTOS/SET_PAGINATION",e.CHANGE_PAGINATION="@@PHOTOS/CHANGE_PAGINATION"}(he||(he={})),function(e){e.LATEST="latest",e.OLDEST="oldest",e.POPULAR="popular"}(de||(de={}));var be={list:[],pagination:new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de.LATEST;Object(s.a)(this,e),this.perPage=t,this.page=n,this.orderBy=r}return Object(l.a)(e,null,[{key:"fromExist",value:function(t){return new e(t.perPage,t.page,t.orderBy)}}]),e}())(40)},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he.SET_LIST:return Object(b.a)({},e,{list:t.payload});case he.SET_PAGINATION:return Object(b.a)({},e,{pagination:t.payload});default:return e}},ve=n(34),Ee="https://api.unsplash.com",ye=function e(){Object(s.a)(this,e)};ye.get=function(){var e=Object(Y.a)(X.a.mark(function e(t,n){var r,a,c;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.token,a={headers:{Authorization:n&&n.isProtected?"":"Bearer ".concat(r)}},e.next=5,ee.a.get(Ee+t,a);case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}(),ye.post=function(){var e=Object(Y.a)(X.a.mark(function e(t,n,r){var a,c;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={},e.next=4,ee.a.post(Ee+t,a);case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,r){return e.apply(this,arguments)}}();var ge,je=function(e){return!!e.auth.token},Te=function(e){return e.auth.token.access_token},Se=function(e){return e.photos.list},ke=function(e){return e.photos.pagination},Ne=function(){var e=Object(Y.a)(X.a.mark(function e(t,n,r,a){var c,o,i,u,s,l,p,f;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=a(),o=ke(c),i=o.perPage,u=o.page,s=o.orderBy,l=Te(c),p="/photos?per_page=".concat(i,"&page=").concat(u,"&order_by=").concat(s),e.next=7,ye.get(p,{token:l});case 7:f=e.sent,r((h=f,{type:he.SET_LIST,payload:h})),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:n(t);case 15:case"end":return e.stop()}var h},e,null,[[0,11]])}));return function(t,n,r,a){return e.apply(this,arguments)}}(),xe=[function(e){var t=e.dispatch,n=e.getState;return function(e){return(r=he.FETCH_LIST,a=Ne,function(e,t,n){return function(c){("string"!==typeof r?-1!==r.indexOf(c.type):r===c.type)?a(c,e,t,n):e(c)}})(e,t,n);var r,a}},function(e){e.dispatch,e.getState;return function(e){return function(){var t=Object(Y.a)(X.a.mark(function t(n){return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.type!==he.CHANGE_PAGINATION){t.next=7;break}t.prev=1,t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(1),t.t0;case 7:e(n);case 8:case"end":return t.stop()}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}()}}],Ce=Object(ve.a)(xe);(ge||(ge={})).SET_PROFILE="@@USER_PROFILE/SET";var Ie,_e,we,Ae,Fe={profile:void 0},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.SET_PROFILE:return Object(b.a)({},e,{profile:t.payload});default:return e}},Pe=function(e){return{type:ge.SET_PROFILE,payload:e}},Le=function(e){return e.userProfile.profile?e.userProfile.profile.username:""},He=Object(u.c)(function(e){return{counter:e.counter.value,isSignedIn:!!e.auth.token,photos:Se(e),userName:Le(e)}},function(e){return{onFetchList:function(){return e({type:he.FETCH_LIST})},onFetchUserProfile:function(){return e(function(){var e=Object(Y.a)(X.a.mark(function e(t,n){var r,a,c;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),a=Te(r),e.next=5,ye.get("/me",{token:a});case 5:c=e.sent,t(Pe(c));case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())}}})(Oe),Ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).componentDidMount=Object(Y.a)(X.a.mark(function e(){var t;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.isValid&&(t=n.props.location,n.props.onFetchToken(t.search.split("=")[1]));case 1:case"end":return e.stop()}},e)})),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.isValid?null:c.createElement(v.a,{to:"/"})}},{key:"isValid",get:function(){return-1!==this.props.location.search.indexOf("code")}}]),t}(c.Component),Ge=Object(u.c)(void 0,function(e){return{onFetchToken:function(t){return e(function(e){return{type:D.FETCH_TOKEN,payload:e}}(t))}}})(Ue),De=function(e,t){return{color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"&:hover":{backgroundColor:e.palette[t].dark,"@media (hover: none)":{backgroundColor:e.palette[t].main}}}},ze=n(84),We=n(39),Ke=(n(122),n(4)),Me=(Ie=function(){function e(){Object(s.a)(this,e),Object(ze.a)(this,"value",_e,this)}return Object(l.a)(e,[{key:"increase",value:function(){this.value+=1}},{key:"decrease",value:function(){this.value-=1}},{key:"clear",value:function(){this.value=0}},{key:"hexValue",get:function(){return this.value.toString(16)}}]),e}(),_e=Object(We.a)(Ie.prototype,"value",[Ke.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(We.a)(Ie.prototype,"hexValue",[Ke.e],Object.getOwnPropertyDescriptor(Ie.prototype,"hexValue"),Ie.prototype),Object(We.a)(Ie.prototype,"increase",[Ke.d],Object.getOwnPropertyDescriptor(Ie.prototype,"increase"),Ie.prototype),Object(We.a)(Ie.prototype,"decrease",[Ke.d],Object.getOwnPropertyDescriptor(Ie.prototype,"decrease"),Ie.prototype),Object(We.a)(Ie.prototype,"clear",[Ke.d],Object.getOwnPropertyDescriptor(Ie.prototype,"clear"),Ie.prototype),function(){function e(){Object(s.a)(this,e),this.value=0}return Object(l.a)(e,[{key:"increase",value:function(){this.value+=10500}},{key:"decrease",value:function(){this.value-=1}},{key:"clear",value:function(){this.value=0}},{key:"hexValue",get:function(){return"asdasdasd"}}]),e}()),Ve=Object(re.b)("counter")(we=Object(re.c)(we=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.counter;return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.decrease()}},"-"),e.value,o.a.createElement("button",{onClick:function(){return e.increase()}},"+"))}}]),t}(o.a.Component))||we)||we,Be=n(142),Je=Object(k.a)(function(e){return Object(x.a)({root:{background:e.palette.primary.main},container:{maxWidth:960,margin:"0 auto"},signInLinkWrapper:{width:"100%",display:"flex",justifyContent:"center"},signInLink:{color:e.palette.text.primary,border:""},success:L(e,y.SUCCESS,De),warning:L(e,y.WARNING,De),info:L(e,"primary",De),primary:L(e,"primary",De),error:L(e,"error",De),secondary:L(e,"secondary",De),confirm:L(e,"confirm",De)})})(function(e){var t=e.classes,n="https://unsplash.com/oauth/authorize?client_id=".concat("588745fe0494eda1c54354b97d7885c5f94a97a359ce835605acf2df6163ba8c","&redirect_uri=").concat("http://localhost:3000/auth","&response_type=code&scope=").concat("public+read_user+write_user+read_photos+write_photos+write_likes+write_followers+read_collections+write_collections");return c.createElement(Be.a,{theme:H},c.createElement(ie,{title:"SIGN IN"},c.createElement("div",{className:t.signInLink},c.createElement("a",{className:t.signInLink,href:n},"Sign in with your unsplash account"),c.createElement(G,{color:"info"},"Click me")),c.createElement(Ve,null)),";")}),qe=[{path:r.SIGN_IN,render:function(e){return c.createElement(Je,e)}},{path:r.HOME,render:function(e){return c.createElement(He,e)},exact:!0,isProtected:!0},{path:r.AUTH,render:function(e){return c.createElement(Ge,e)}},{path:r.NOT_FOUND,render:function(){return c.createElement("h2",null,"Not found!")}},{path:r.REDIRECT,render:function(){return c.createElement(v.a,{to:"/404"})}}],Qe=Object(u.c)(function(e){return{isSignedIn:je(e)}})(function(e){var t=e.isSignedIn,n=Object(S.a)(e,["isSignedIn"]);return t?c.createElement(v.b,n):c.createElement(v.a,{to:r.SIGN_IN})}),Xe=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.createElement("div",{className:e.root},c.createElement(v.d,null,qe.map(function(e){return e.isProtected?c.createElement(Qe,Object.assign({key:Object(O.v4)()},e)):c.createElement(v.b,Object.assign({key:Object(O.v4)()},e))})))}}]),t}(c.Component),Ye=Object(d.b)(function(e){return Object(b.a)({},function(e){return{"@global":{"*":{boxSizing:" border-box","&:active, &:hover, &:focus":{outline:0,"-webkit-tap-highlight-color":"transparent"}},html:{minHeight:"100vh",fontFamily:e.typo.fontFamily,fontSize:e.typo.fontSize,fontWeight:400,"-ms-text-size-adjust":"100%","-webkit-text-size-adjust":"100%","-webkit-font-smoothing":"antialiased"},"body, h1, h2, h3, h4, ul, ol, figure":{margin:0,padding:0},"ul, ol":{listStyle:"none"},a:{textDecoration:"none",color:e.palette.primary.text},body:{margin:0,padding:0,minHeight:"100vh"}}}}(e),{root:{height:200}})})(Xe),Ze=n(42),$e=n(36),et=n(85),tt=n(77),nt=$e.d,rt=n(30);n.d(t,"history",function(){return ct});var at,ct=Object(rt.a)(),ot=(at=ct,Object($e.e)(function(e){return Object($e.c)({counter:K,auth:q,photos:me,userProfile:Re,router:Object(Ze.b)(e)})}(at),void 0,nt($e.a.apply(void 0,[et.a,Object(tt.a)(at)].concat(Object(ve.a)(M),Object(ve.a)(ne),Object(ve.a)(Ce)))))),it=(Ae={},Object(a.a)(Ae,"counter",new Me),Object(a.a)(Ae,"authStore",new function e(){var t=this;Object(s.a)(this,e),this.isAuthenticated=!1,this.signIn=function(e){t.isAuthenticated=!0},this.signOut=function(){t.isAuthenticated=!1}}),Ae);i.render(c.createElement(u.a,{store:ot},c.createElement(re.a,it,c.createElement(d.a,{theme:m},c.createElement(Ze.a,{history:ct},c.createElement(g.Provider,{value:"World"},c.createElement(Ye,null)))))),document.getElementById("root"))},87:function(e,t,n){e.exports=n(123)}},[[87,1,2]]]);
//# sourceMappingURL=main.c155e372.chunk.js.map